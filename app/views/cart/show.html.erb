<% provide(:title, "#{@brand.name} - Cart") %>


<% if @line_items.any? %>
<section class="section has-text-left">
  <div class="content">
    <h3 class="title">Items in your cart</h3>
  </div>

  <table class="table is-hoverable is-fullwidth">
    <thead>
      <tr>
        <th></th>
        <th>Product</th>
        <th class="has-text-centered">Quantity</th>
        <th class="is-hidden-mobile has-text-centered">Total Price</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @line_items.each do |item| %>
        <tr id='<%= "lineItemRow#{item.id}" %>'>
          <td><%= image_tag item.product.photos.first.variant(resize: "96x96") %></td>
          <td class="is-size-5 is-size-6-mobile"><%= item.product.name %></td>
          <td class="is-size-5 is-size-6-mobile has-text-centered"><%= item.quantity %></td>
          <td class="is-size-5 is-hidden-mobile has-text-centered"><%= number_to_currency(item.total_price, unit: 'â‚¹', format: '%u %n') %></td>
          <td class="is-size-7">
            <%= link_to line_item_path(@brand.handle, item), class: 'has-text-grey-dark', data: { confirm: "Are you sure you want to remove #{item.product.name}?" }, method: :delete, remote: true do %>
              <span class="icon is-small"><i class="fas fa-trash-alt"></i></span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <hr />

  <div class="columns has-text-centered is-mobile">
    <div class="column">
    </div>
    <div class="column is-narrow">
      <div class="content">
        <%= render 'cart/subtotal' %>
        <%= link_to 'Check out', nil, class: 'button is-medium is-hidden-mobile is-primary is-fullwidth' %>
        <%= link_to 'Check out', nil, class: 'button is-hidden-tablet is-primary is-fullwidth' %>
      </div>
    </div>
  </div>
</section>
<% else %>
<section class="section">
  <div class="content">
    <h3 class="title">Your cart is empty right now. You can start adding products from <%= link_to 'here', storefront_path(@brand.handle) %>.</h3>
  </div>
</section>
<% end%>
